{"remainingRequest":"E:\\element_vue_learn\\c_vue\\node_modules\\babel-loader\\lib\\index.js!E:\\element_vue_learn\\c_vue\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\element_vue_learn\\c_vue\\src\\views\\login\\login.js?vue&type=script&lang=js&","dependencies":[{"path":"E:\\element_vue_learn\\c_vue\\src\\views\\login\\login.js","mtime":1579599826283},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1578655505761},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1576686570372},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\eslint-loader\\index.js","mtime":1576686573979}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLyBpbXBvcnQgeyBsb2cgfSBmcm9tICJ1dGlsIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgcmVndWxhciA9IC9eW2EtekEtWjAtOV17NCwxNn0kLzsKCiAgICB2YXIgbG9naW5Vc2VyID0gZnVuY3Rpb24gbG9naW5Vc2VyKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAocmVndWxhci50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLnlKjmiLflkI3pnZ7ms5UiKSk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlck5hbWU6ICJhZG1pbiIsCiAgICAgICAgcGFzc1dvcmQ6ICJhZG1pbiIKICAgICAgfSwKICAgICAgbG9naW5Gb3JtUnVsZXM6IHsKICAgICAgICB1c2VyTmFtZTogW3sKICAgICAgICAgIHZhbGlkYXRvcjogbG9naW5Vc2VyLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0sCiAgICAgICAgcGFzc1dvcmQ6IFt7CiAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXlr4bnoIEiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfSwgewogICAgICAgICAgbWluOiAzLAogICAgICAgICAgbWF4OiAxNiwKICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMyDliLAgMTYg5Liq5a2X56ymIiwKICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgIH1dCiAgICAgIH0sCiAgICAgIHJlZ2lzdGVyZVVzZXJTdGF0dXM6IGZhbHNlCiAgICB9OwogIH0sCiAgbW91bnRlZDogZnVuY3Rpb24gbW91bnRlZCgpIHt9LAogIG1ldGhvZHM6IHsKICAgIC8v55m75b2V5oyJ6ZKu55qE5LqL5Lu2CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oZm9ybU5hbWUpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKGZ1bmN0aW9uICh2YWxpZCkgewogICAgICAgIC8v6aqM6K+B6YCa6L+H5omN5Y+R6K+35rGC5ZCm5YiZ5bCxIOi3s+WHuiByZXR1cm4gZmFsc2UKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIF90aGlzLiRwb3N0KCIvbG9naW4vbG9naW4ucGhwIiwgewogICAgICAgICAgICB1c2VyOiBfdGhpcy5sb2dpbkZvcm0udXNlck5hbWUKICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlcykgewogICAgICAgICAgICAvL+eZu+W9leaIkOWKn+iwg+eUqOeUn+aIkHRva2Vu55qE5pa55rOVCiAgICAgICAgICAgIF90aGlzLnNldFRva2VuKHJlcy5kYXRhLmRhdGFbMF0ubWVudUlkLCByZXMuZGF0YS5zdW0pOyAvL+W9k+eUqOaIt+eZu+W9leaIkOWKn+eahOaXtuWAmQoKCiAgICAgICAgICAgIGlmIChyZXMuZGF0YS5jb2RlID09PSAiMCIpIHsKICAgICAgICAgICAgICBfdGhpcy4kYWxlcnRNZXNzYWdlKHsKICAgICAgICAgICAgICAgIHRleHQ6ICLnmbvlvZXmiJDlip8iLAogICAgICAgICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgICAgICAgc2hvdzogdHJ1ZSwKICAgICAgICAgICAgICAgIGR1cmF0aW9uOiAxMDAwCiAgICAgICAgICAgICAgfSwgX3RoaXMuc3VjY2Vzc0RvKHJlcy5kYXRhLmRhdGFbMF0ubWVudUlkKSk7IC8v55m75b2V6aqM6K+B5by55Ye65rKh5pyJ6YCa6L+H5bCx55WZ5Zyo5b2T5YmN6aG1YGAKCiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgX3RoaXMuJGFsZXJ0TWVzc2FnZSh7CiAgICAgICAgICAgICAgICB0ZXh0OiByZXMuZGF0YS5lcnJvciwKICAgICAgICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICAgICAgICBzaG93OiB0cnVlCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICAvL+eUn+aIkHRva2VuCiAgICBzZXRUb2tlbjogZnVuY3Rpb24gc2V0VG9rZW4obWVudUlkLCBzdW0pIHsKICAgICAgdmFyIHRva2VuID0gIiIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSArIHN1bTsKICAgICAgdG9rZW4gPSB0b2tlbi5zcGxpdCgiIik7CgogICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRva2VuLmxlbmd0aCAtIDE7IGkrKykgewogICAgICAgIC8vIOWmguaenOWJjeS4gOS4quaVsCDlpKfkuo4g5ZCO5LiA5Liq5pWwIOWwseS6pOaNouS4pOaVsOS9jee9rgogICAgICAgIGlmICgtdG9rZW5baV0gPiAtdG9rZW5baSArIDFdKSB7CiAgICAgICAgICB2YXIgdGVtcCA9IHRva2VuW2ldOwogICAgICAgICAgdG9rZW5baV0gPSB0b2tlbltpICsgMV07CiAgICAgICAgICB0b2tlbltpICsgMV0gPSB0ZW1wOwogICAgICAgIH0KICAgICAgfQoKICAgICAgdG9rZW5bNF0gPSBtZW51SWQ7CiAgICAgIHRva2VuID0gdG9rZW4uam9pbigiIik7CiAgICAgIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oInRva2VuIiwgdG9rZW4pOwogICAgICBjb25zb2xlLmxvZyh0b2tlbik7CiAgICB9LAogICAgLy/nmbvpmYbmiJDlip/ot7PovazpobXpnaIKICAgIHN1Y2Nlc3NEbzogZnVuY3Rpb24gc3VjY2Vzc0RvKGlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm1lbnVJZCA9IGlkOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogIummlumhtSIsCiAgICAgICAgcGFyYW1zOiB7CiAgICAgICAgICBtZW51SWQ6IGlkCiAgICAgICAgfQogICAgICB9KTsKICAgICAgdGhpcy4kc3RvcmUuZGlzcGF0Y2goImdldE1lbnVEYXRhIiwgewogICAgICAgIG1lbnVJZDogaWQsCiAgICAgICAgdm06IHRoaXMKICAgICAgfSk7CiAgICB9LAogICAgaG9tZXBhZ2U6IGZ1bmN0aW9uIGhvbWVwYWdlKCkgewogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi8iCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["E:/element_vue_learn/c_vue/src/views/login/login.js"],"names":["data","regular","loginUser","rule","value","callback","test","Error","loginForm","userName","passWord","loginFormRules","validator","trigger","required","message","min","max","registereUserStatus","mounted","methods","login","formName","$refs","validate","valid","$post","user","then","res","setToken","menuId","sum","code","$alertMessage","text","type","show","duration","successDo","error","token","Date","getTime","split","i","length","temp","join","sessionStorage","setItem","console","log","id","$store","state","$router","push","name","params","dispatch","vm","homepage","path"],"mappings":"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","sourcesContent":["// import { log } from \"util\";\r\nexport default {\r\n  data() {\r\n    let regular = /^[a-zA-Z0-9]{4,16}$/;\r\n    let loginUser = (rule, value, callback) => {\r\n      if (regular.test(value)) {\r\n        callback();\r\n      } else {\r\n        callback(new Error(\"用户名非法\"));\r\n      }\r\n    };\r\n    return {\r\n      loginForm: {\r\n        userName: \"admin\",\r\n        passWord: \"admin\"\r\n      },\r\n      loginFormRules: {\r\n        userName: [{ validator: loginUser, trigger: \"blur\" }],\r\n        passWord: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          { min: 3, max: 16, message: \"长度在 3 到 16 个字符\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n\r\n      registereUserStatus: false\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    //登录按钮的事件\r\n    login(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        //验证通过才发请求否则就 跳出 return false\r\n        if (valid) {\r\n          this.$post(\"/login/login.php\", {\r\n            user: this.loginForm.userName\r\n          }).then(res => {\r\n            //登录成功调用生成token的方法\r\n            this.setToken(res.data.data[0].menuId, res.data.sum);\r\n            //当用户登录成功的时候\r\n            if (res.data.code === \"0\") {\r\n              this.$alertMessage(\r\n                {\r\n                  text: \"登录成功\",\r\n                  type: \"success\",\r\n                  show: true,\r\n                  duration: 1000\r\n                },\r\n                this.successDo(res.data.data[0].menuId)\r\n              );\r\n              //登录验证弹出没有通过就留在当前页``\r\n            } else {\r\n              this.$alertMessage({\r\n                text: res.data.error,\r\n                type: \"error\",\r\n                show: true\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //生成token\r\n    setToken(menuId, sum) {\r\n      let token = \"\" + new Date().getTime() + sum;\r\n      token = token.split(\"\");\r\n      for (let i = 0; i < token.length - 1; i++) {\r\n        // 如果前一个数 大于 后一个数 就交换两数位置\r\n        if (-token[i] > -token[i + 1]) {\r\n          let temp = token[i];\r\n          token[i] = token[i + 1];\r\n          token[i + 1] = temp;\r\n        }\r\n      }\r\n      token[4] = menuId;\r\n      token = token.join(\"\");\r\n      sessionStorage.setItem(\"token\", token);\r\n      console.log(token);\r\n    },\r\n    //登陆成功跳转页面\r\n    successDo(id) {\r\n      this.$store.state.menuId = id;\r\n      this.$router.push({\r\n        name: \"首页\",\r\n        params: { menuId: id }\r\n      });\r\n      this.$store.dispatch(\"getMenuData\", {\r\n        menuId: id,\r\n        vm: this\r\n      });\r\n    },\r\n    homepage() {\r\n      this.$router.push({ path: \"/\" });\r\n    }\r\n  }\r\n};\r\n"]}]}