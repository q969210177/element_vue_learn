{"remainingRequest":"E:\\element_vue_learn\\c_vue\\node_modules\\thread-loader\\dist\\cjs.js!E:\\element_vue_learn\\c_vue\\node_modules\\babel-loader\\lib\\index.js!E:\\element_vue_learn\\c_vue\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\element_vue_learn\\c_vue\\src\\views\\login\\login.js?vue&type=script&lang=js&","dependencies":[{"path":"E:\\element_vue_learn\\c_vue\\src\\views\\login\\login.js","mtime":1584464114823},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1581766809385},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\thread-loader\\dist\\cjs.js","mtime":1581766833579},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\babel-loader\\lib\\index.js","mtime":1581766806626},{"path":"E:\\element_vue_learn\\c_vue\\node_modules\\eslint-loader\\index.js","mtime":1581766816958}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuam9pbiI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmRhdGUudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMucmVnZXhwLmV4ZWMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5zdHJpbmcuc3BsaXQiOwovLyBpbXBvcnQgeyBsb2cgfSBmcm9tICJ1dGlsIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uIGRhdGEoKSB7CiAgICB2YXIgcmVndWxhciA9IC9eW2EtekEtWjAtOV17NCwxNn0kLzsKCiAgICB2YXIgbG9naW5Vc2VyID0gZnVuY3Rpb24gbG9naW5Vc2VyKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgewogICAgICBpZiAocmVndWxhci50ZXN0KHZhbHVlKSkgewogICAgICAgIGNhbGxiYWNrKCk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2sobmV3IEVycm9yKCLnlKjmiLflkI3pnZ7ms5UiKSk7CiAgICAgIH0KICAgIH07CgogICAgcmV0dXJuIHsKICAgICAgbG9naW5Gb3JtOiB7CiAgICAgICAgdXNlck5hbWU6ICIiLAogICAgICAgIHBhc3NXb3JkOiAiIgogICAgICB9LAogICAgICBsb2dpbkZvcm1SdWxlczogewogICAgICAgIHVzZXJOYW1lOiBbewogICAgICAgICAgdmFsaWRhdG9yOiBsb2dpblVzZXIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9XSwKICAgICAgICBwYXNzV29yZDogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeWvhueggSIsCiAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICB9LCB7CiAgICAgICAgICBtaW46IDMsCiAgICAgICAgICBtYXg6IDE2LAogICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCAzIOWIsCAxNiDkuKrlrZfnrKYiLAogICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgfV0KICAgICAgfSwKICAgICAgcmVnaXN0ZXJlVXNlclN0YXR1czogZmFsc2UKICAgIH07CiAgfSwKICBtb3VudGVkOiBmdW5jdGlvbiBtb3VudGVkKCkge30sCiAgbWV0aG9kczogewogICAgLy/nmbvlvZXmjInpkq7nmoTkuovku7YKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihmb3JtTmFtZSkgewogICAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoZnVuY3Rpb24gKHZhbGlkKSB7CiAgICAgICAgLy/pqozor4HpgJrov4fmiY3lj5Hor7fmsYLlkKbliJnlsLEg6Lez5Ye6IHJldHVybiBmYWxzZQogICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgX3RoaXMuJHBvc3QoIi9sb2dpbi9sb2dpbi5waHAiLCB7CiAgICAgICAgICAgIHVzZXI6IF90aGlzLmxvZ2luRm9ybS51c2VyTmFtZQogICAgICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzKSB7CiAgICAgICAgICAgIC8v55m75b2V5oiQ5Yqf6LCD55So55Sf5oiQdG9rZW7nmoTmlrnms5UKICAgICAgICAgICAgX3RoaXMuc2V0VG9rZW4ocmVzLmRhdGEuZGF0YVswXS5tZW51SWQsIHJlcy5kYXRhLnN1bSk7IC8v5b2T55So5oi355m75b2V5oiQ5Yqf55qE5pe25YCZCgoKICAgICAgICAgICAgaWYgKHJlcy5kYXRhLmNvZGUgPT09ICIwIikgewogICAgICAgICAgICAgIF90aGlzLiRhbGVydE1lc3NhZ2UoewogICAgICAgICAgICAgICAgdGV4dDogIueZu+W9leaIkOWKnyIsCiAgICAgICAgICAgICAgICB0eXBlOiAic3VjY2VzcyIsCiAgICAgICAgICAgICAgICBzaG93OiB0cnVlLAogICAgICAgICAgICAgICAgZHVyYXRpb246IDEwMDAKICAgICAgICAgICAgICB9LCBfdGhpcy5zdWNjZXNzRG8ocmVzLmRhdGEuZGF0YVswXS5tZW51SWQpKTsKCiAgICAgICAgICAgICAgX3RoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbWdTcmMgPSByZXMuZGF0YS5kYXRhWzBdLnVzZXJJbWc7IC8v55m75b2V6aqM6K+B5by55Ye65rKh5pyJ6YCa6L+H5bCx55WZ5Zyo5b2T5YmN6aG1YGAKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICBfdGhpcy4kYWxlcnRNZXNzYWdlKHsKICAgICAgICAgICAgICAgIHRleHQ6IHJlcy5kYXRhLmVycm9yLAogICAgICAgICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgICAgICAgIHNob3c6IHRydWUKICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfQogICAgICAgICAgfSk7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICB9CiAgICAgIH0pOwogICAgfSwKICAgIC8v55Sf5oiQdG9rZW4KICAgIHNldFRva2VuOiBmdW5jdGlvbiBzZXRUb2tlbihtZW51SWQsIHN1bSkgewogICAgICB2YXIgdG9rZW4gPSAiIiArIG5ldyBEYXRlKCkuZ2V0VGltZSgpICsgc3VtOwogICAgICB0b2tlbiA9IHRva2VuLnNwbGl0KCIiKTsKCiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG9rZW4ubGVuZ3RoIC0gMTsgaSsrKSB7CiAgICAgICAgLy8g5aaC5p6c5YmN5LiA5Liq5pWwIOWkp+S6jiDlkI7kuIDkuKrmlbAg5bCx5Lqk5o2i5Lik5pWw5L2N572uCiAgICAgICAgaWYgKC10b2tlbltpXSA+IC10b2tlbltpICsgMV0pIHsKICAgICAgICAgIHZhciB0ZW1wID0gdG9rZW5baV07CiAgICAgICAgICB0b2tlbltpXSA9IHRva2VuW2kgKyAxXTsKICAgICAgICAgIHRva2VuW2kgKyAxXSA9IHRlbXA7CiAgICAgICAgfQogICAgICB9CgogICAgICB0b2tlbls0XSA9IG1lbnVJZDsKICAgICAgdG9rZW4gPSB0b2tlbi5qb2luKCIiKTsKICAgICAgc2Vzc2lvblN0b3JhZ2Uuc2V0SXRlbSgidG9rZW4iLCB0b2tlbik7CiAgICB9LAogICAgLy/nmbvpmYbmiJDlip/ot7PovazpobXpnaIKICAgIHN1Y2Nlc3NEbzogZnVuY3Rpb24gc3VjY2Vzc0RvKGlkKSB7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLm1lbnVJZCA9IGlkOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogImhvbWUiLAogICAgICAgIHBhcmFtczogewogICAgICAgICAgbWVudUlkOiBpZAogICAgICAgIH0KICAgICAgfSk7CiAgICAgIHRoaXMuJHN0b3JlLmRpc3BhdGNoKCJnZXRNZW51RGF0YSIsIHsKICAgICAgICBtZW51SWQ6IGlkLAogICAgICAgIHZtOiB0aGlzCiAgICAgIH0pOwogICAgfSwKICAgIGhvbWVwYWdlOiBmdW5jdGlvbiBob21lcGFnZSgpIHsKICAgICAgLy/ngrnlh7vpppbpobUg5bCx5Zue5Yiw6aaW6aG1IOexu+S8vOi/lOWbnuaMiemSrgogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgcGF0aDogIi8iCiAgICAgIH0pOwogICAgfQogIH0KfTs="},{"version":3,"sources":["E:/element_vue_learn/c_vue/src/views/login/login.js"],"names":["data","regular","loginUser","rule","value","callback","test","Error","loginForm","userName","passWord","loginFormRules","validator","trigger","required","message","min","max","registereUserStatus","mounted","methods","login","formName","$refs","validate","valid","$post","user","then","res","setToken","menuId","sum","code","$alertMessage","text","type","show","duration","successDo","$store","state","userImgSrc","userImg","error","token","Date","getTime","split","i","length","temp","join","sessionStorage","setItem","id","$router","push","name","params","dispatch","vm","homepage","path"],"mappings":"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","sourcesContent":["// import { log } from \"util\";\r\nexport default {\r\n  data() {\r\n    let regular = /^[a-zA-Z0-9]{4,16}$/;\r\n    let loginUser = (rule, value, callback) => {\r\n      if (regular.test(value)) {\r\n        callback();\r\n      } else {\r\n        callback(new Error(\"用户名非法\"));\r\n      }\r\n    };\r\n    return {\r\n      loginForm: {\r\n        userName: \"\",\r\n        passWord: \"\"\r\n      },\r\n      loginFormRules: {\r\n        userName: [{ validator: loginUser, trigger: \"blur\" }],\r\n        passWord: [\r\n          { required: true, message: \"请输入密码\", trigger: \"blur\" },\r\n          { min: 3, max: 16, message: \"长度在 3 到 16 个字符\", trigger: \"blur\" }\r\n        ]\r\n      },\r\n\r\n      registereUserStatus: false\r\n    };\r\n  },\r\n  mounted() {},\r\n  methods: {\r\n    //登录按钮的事件\r\n    login(formName) {\r\n      this.$refs[formName].validate(valid => {\r\n        //验证通过才发请求否则就 跳出 return false\r\n        if (valid) {\r\n          this.$post(\"/login/login.php\", {\r\n            user: this.loginForm.userName\r\n          }).then(res => {\r\n            //登录成功调用生成token的方法\r\n            this.setToken(res.data.data[0].menuId, res.data.sum);\r\n            //当用户登录成功的时候\r\n            if (res.data.code === \"0\") {\r\n              this.$alertMessage(\r\n                {\r\n                  text: \"登录成功\",\r\n                  type: \"success\",\r\n                  show: true,\r\n                  duration: 1000\r\n                },\r\n                this.successDo(res.data.data[0].menuId)\r\n              );\r\n              this.$store.state.userImgSrc = res.data.data[0].userImg;\r\n\r\n              //登录验证弹出没有通过就留在当前页``\r\n            } else {\r\n              this.$alertMessage({\r\n                text: res.data.error,\r\n                type: \"error\",\r\n                show: true\r\n              });\r\n            }\r\n          });\r\n        } else {\r\n          return false;\r\n        }\r\n      });\r\n    },\r\n    //生成token\r\n    setToken(menuId, sum) {\r\n      let token = \"\" + new Date().getTime() + sum;\r\n      token = token.split(\"\");\r\n      for (let i = 0; i < token.length - 1; i++) {\r\n        // 如果前一个数 大于 后一个数 就交换两数位置\r\n        if (-token[i] > -token[i + 1]) {\r\n          let temp = token[i];\r\n          token[i] = token[i + 1];\r\n          token[i + 1] = temp;\r\n        }\r\n      }\r\n      token[4] = menuId;\r\n      token = token.join(\"\");\r\n      sessionStorage.setItem(\"token\", token);\r\n    },\r\n    //登陆成功跳转页面\r\n    successDo(id) {\r\n      this.$store.state.menuId = id;\r\n      this.$router.push({\r\n        name: \"home\",\r\n        params: { menuId: id }\r\n      });\r\n      this.$store.dispatch(\"getMenuData\", {\r\n        menuId: id,\r\n        vm: this\r\n      });\r\n    },\r\n    homepage() {\r\n      //点击首页 就回到首页 类似返回按钮\r\n      this.$router.push({ path: \"/\" });\r\n    }\r\n  }\r\n};\r\n"]}]}